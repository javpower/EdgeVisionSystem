edge-vision:
  system:
    device-id: "EDGE_001"
    port: 8000
    save-local: true

  cameras:
    # 本地摄像头[0, 1] 或 视频流["rtsp://..."] 或视频["/Volumes/.mp4"] 或 MVS 摄像头["mvs:0"]
    sources: ["/Volumes/macEx/训练/视频/CX756602.mp4"] # CX756601，"/Volumes/macEx/训练/视频/EKS.mp4"
  # 图像拼接配置
  stitching:
    # 拼接策略: simple（简单拼接）, auto（自动拼接）, manual（手动拼接）
    strategy: manual
    # 融合区域宽度（simple 模式下使用）
    blend-width: 100
    # 是否启用融合（simple 模式下使用）
    enable-blend: true

  models:
    # 类型识别模型（可选，不配置则跳过类型识别阶段）
    type-model: "models/type_classifier.onnx"
    # 细节检测模型（必须）
    detail-model: "models/detail_detector.onnx"
    conf-thres: 0.25
    iou-thres: 0.45
    device: "GPU"  # CPU 或 GPU

  remote:
    upload-url: ""  # 上传地址，空字符串表示不上传
    timeout: 5

  # 质检配置
  inspection:
    # 匹配策略: topology（拓扑图匹配）, coordinate（坐标直接匹配）, fourcorner（四角匹配）
    # topology: 支持旋转/平移/尺度变化，适合复杂场景
    # coordinate: 一对一关系明确，错检漏检一目了然
    # fourcorner: 利用工件四角作为世界坐标系，通过仿射不变量匹配，支持平移/旋转/缩放
    match-strategy: coordinate
    # 最大匹配距离（像素，相对坐标）- 用于坐标匹配时查找最近的匹配
    max-match-distance: 100.0
    # 是否将未在模板中定义的检测对象视为错检（默认false）
    # true=严格模式，检测到模板中不存在的特征会报错
    # false=宽松模式，只验证模板中定义的特征是否存在
    treat-extra-as-error: true
    # 默认容差值（像素）
    default-tolerance-x: 20.0
    default-tolerance-y: 20.0
    # 四角匹配指纹容差（越小越严格，范围0.1-1.0）
    fingerprint-tolerance: 0.5

# Spring Boot 配置
server:
  port: ${edge-vision.system.port:8000}

spring:
  application:
    name: edge-vision-system
  jackson:
    serialization:
      write-dates-as-timestamps: false
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 10MB

# Actuator 健康检查配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always

# 日志配置
logging:
  level:
    root: INFO
    com.edge.vision: DEBUG
    org.springframework.web: DEBUG
    org.springframework.web.servlet: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"